@page "/utilisateur/moi"

@inject HttpClient Client
@inject IJSRuntime JsRuntime


@if (_info == null) {
    <p>Vous n'êtes pas connecté<div class="loading-bar"></div></p>
} else {
    <h2>Gestion utilisateur</h2>
    <h3>Vos informations</h3>
    <h4>Nom d'utilisateur</h4>
    <p>@_info.Name</p>
    <h4>Addresse mail principale</h4>
    <p>@_info.Email</p>
    <h4>Type de compte</h4>
    <p>@_info.Role</p>
    <h3>Modification de vos informations</h3>
    <ClientItem user=_info></ClientItem>
}

@code {
    private UserPublic _info = null;
    protected override async Task OnInitializedAsync()
    {
        _info = await Client.GetFromJsonAsync<UserPublic>("Users/info");
    }
}