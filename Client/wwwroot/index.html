<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Mediwatch</title>
    <base href="/" />
    <link href="css/bootstrap/bootstrap.min.css" rel="stylesheet" />
    <link rel="shortcut icon" href="css/images/MediwatchIcone.ico">
    <link href="_content/SharedComponent/styles.css" rel="stylesheet" />
    <link href="css/app.css" rel="stylesheet" />
    <link rel="stylesheet" href="css/mockup.css" />

    <!-- Ajout du css des ic√¥nes Bootstrap. -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600&display=swap" rel="stylesheet">
    <link href="_content/Blazorise/blazorise.css" rel="stylesheet" />
    <link href="_content/Blazorise.Bootstrap/blazorise.bootstrap.css" rel="stylesheet" />


    <!-- Calendrier :)-->
    <script src="https://cdn.dhtmlx.com/scheduler/edge/dhtmlxscheduler.js"></script>
    <link href="https://cdn.dhtmlx.com/scheduler/edge/dhtmlxscheduler_material.css" rel="stylesheet" type="text/css"
        charset="utf-8">

</head>

<body>
    <app>Loading...</app>

    <div id="blazor-error-ui">
        An unhandled error has occurred.
        <a href="" class="reload">Reload</a>
        <a class="dismiss">üóô</a>
    </div>
    <script src="_framework/blazor.webassembly.js"></script>

    <!-- Ajout du js des ic√¥nes Bootstrap. -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>

    <script src="_content/Blazorise/blazorise.js"></script>
    <script src="_content/Blazorise.Bootstrap/blazorise.bootstrap.js"></script>

    <script> // Calendrier
        var checkExist = setInterval(function () {
            if (document.getElementsByTagName("app").textContent != null && document.getElementsByTagName("app").textContent != "Loading...") {
                clearInterval(checkExist);
            }
            if ($('#scheduler_here').length) {
                scheduler.config.readonly_form = true;
                scheduler.locale = {
                    date: {
                        month_full: ["Janvier", "F√©vrier", "Mars", "Avril", "Mai", "Juin", "Juillet", "Ao√ªt", "Septembre", "Octobre", "Novembre", "D√©cembre"],
                        month_short: ["Jan", "F√©v", "Mar", "Avr", "Mai", "Juin", "Juil", "Ao√ªt", "Sept", "Oct", "Nov", "D√©c"],
                        day_full: ["Dimanche", "Lundi", "Mardi", "Mercredi", "Jeudi", "Vendredi", "Samedi"],
                        day_short: ["Dim", "Lun", "Mar", "Mer", "Jeu", "Ven", "Sam"]
                    },
                    labels: {
                        dhx_cal_today_button: "Aujourd'hui",
                        day_tab: "Jour",
                        week_tab: "Semaine",
                        month_tab: "Mois",
                        new_event: "Nouvel √©v√©nement",
                        icon_save: "Sauver",
                        icon_cancel: "Annuler",
                        icon_details: "D√©tails",
                        icon_edit: "Editer",
                        icon_delete: "Supprimer",
                        confirm_closing: "Confirmez-vous la fermeture ?",
                        confirm_deleting: "Confirmez-vous la suppression ?",
                        section_description: "Description",
                        section_time: "P√©riode",
                        full_day: "Toute la journ√©e",
                        message_ok: "Oui",
                        message_cancel: "Annuler",
                    }
                }
                scheduler.init("scheduler_here", Date.now(), "month")
                scheduler.attachEvent("onLightbox", function(){
                    var section = scheduler.formSection("description");
                    section.control.disabled = true;
                });
                clearInterval(checkExist);
            }
        }, 100)

        function addDXCalendearEvent(formation) {

            console.log("AJOUT", formation)

            scheduler.addEvent({
                start_date: formation.startDate,
                end_date: formation.endDate,
                text: formation.name,
                id: formation.id
            });
        }

        function removeDXCalendearEvent(formation) {
            console.log("SUPPRESSION", formation)

            scheduler.parse([{
                id: formation.id,
                start_date: formation.startDate,
                end_date: formation.endDate
            }])
            scheduler.deleteEvent(formation.id);
        }
    </script>
</body>

</html>